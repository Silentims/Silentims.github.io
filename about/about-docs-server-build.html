<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="icon" href="/images/favicon.ico"><title>关于 - 文档的自动化部署 | SW·BOOK</title><meta name="description" content="时间会回答成长，成长会回答梦想"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/assets/js/runtime~app.c00db5e4.js" as="script"><link rel="preload" href="/assets/css/styles.b0a7dc3e.css" as="style"><link rel="preload" href="/assets/js/846.230969b3.js" as="script"><link rel="preload" href="/assets/js/app.1978498d.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.b0a7dc3e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/images/favicon.ico" alt="SW·BOOK"><span class="site-name can-hide">SW·BOOK</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/java/java-index-basic.md" class="nav-link" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-contains.md" class="nav-link" aria-label="Java 容器"><!--[--><!--]--> Java 容器 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-concurrent.md" class="nav-link" aria-label="Java 并发"><!--[--><!--]--> Java 并发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-jvm.md" class="nav-link" aria-label="JVM 相关"><!--[--><!--]--> JVM 相关 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/about/about-me.md" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/java/java-index-basic.md" class="nav-link" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-contains.md" class="nav-link" aria-label="Java 容器"><!--[--><!--]--> Java 容器 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-concurrent.md" class="nav-link" aria-label="Java 并发"><!--[--><!--]--> Java 并发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/java/java-index-jvm.md" class="nav-link" aria-label="JVM 相关"><!--[--><!--]--> JVM 相关 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/about/about-me.md" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">关于</p><ul class=""><li><!--[--><a href="/about/about-me.html" class="nav-link sidebar-item" aria-label="关于 - 我"><!--[--><!--]--> 关于 - 我 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/about/about-check-list.html" class="nav-link sidebar-item" aria-label="关于 - 更新清单"><!--[--><!--]--> 关于 - 更新清单 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">关于 - 文档网站搭建</p><ul class=""><li><!--[--><a href="/about/about-docs-local-create.html" class="nav-link sidebar-item" aria-label="关于 - 文档的本地搭建"><!--[--><!--]--> 关于 - 文档的本地搭建 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/about/about-docs-basic-config.html" class="nav-link sidebar-item" aria-label="关于 - 文档的基础配置"><!--[--><!--]--> 关于 - 文档的基础配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/about/about-docs-back-up.html" class="nav-link sidebar-item" aria-label="关于 - 文档的备份与托管"><!--[--><!--]--> 关于 - 文档的备份与托管 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="关于 - 文档的自动化部署"><!--[--><!--]--> 关于 - 文档的自动化部署 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#持续集成和部署" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="持续集成和部署"><!--[--><!--]--> 持续集成和部署 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#创建脚本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="创建脚本"><!--[--><!--]--> 创建脚本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#配置脚本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="配置脚本"><!--[--><!--]--> 配置脚本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#执行脚本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="执行脚本"><!--[--><!--]--> 执行脚本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#访问-github-pages" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="访问 Github Pages"><!--[--><!--]--> 访问 Github Pages <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#域名访问" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="域名访问"><!--[--><!--]--> 域名访问 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#域名注册" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="域名注册"><!--[--><!--]--> 域名注册 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#域名解析" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="域名解析"><!--[--><!--]--> 域名解析 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#ssl-证书申请" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="SSL 证书申请"><!--[--><!--]--> SSL 证书申请 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#nginx安装与配置" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Nginx安装与配置"><!--[--><!--]--> Nginx安装与配置 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#安装" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="安装"><!--[--><!--]--> 安装 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/about/about-docs-server-build.html#配置" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="关于-文档的自动化部署" tabindex="-1"><a class="header-anchor" href="#关于-文档的自动化部署" aria-hidden="true">#</a> 关于 - 文档的自动化部署</h1><h2 id="持续集成和部署" tabindex="-1"><a class="header-anchor" href="#持续集成和部署" aria-hidden="true">#</a> 持续集成和部署</h2><h3 id="创建脚本" tabindex="-1"><a class="header-anchor" href="#创建脚本" aria-hidden="true">#</a> 创建脚本</h3><p>在本地<code>swbook</code>目录下，创建新文件目录<code>.github/workflow</code>,并创建<code>main.yml</code>文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> swbook
<span class="token function">mkdir</span> -p .github/workflow
<span class="token builtin class-name">cd</span> .github/workflow
<span class="token function">touch</span> main.yml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="配置脚本" tabindex="-1"><a class="header-anchor" href="#配置脚本" aria-hidden="true">#</a> 配置脚本</h3><p>修改<code>main.yml</code>文件：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy GitHub Pages

<span class="token comment"># 触发条件：在 push 到 master 分支后</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master	<span class="token comment">#注意要和 Github仓库的分支名一致，有些人 Github 仓库默认是 main</span>

<span class="token comment"># 任务</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token comment"># 服务器环境：最新版 Ubuntu</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 拉取代码</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token comment"># 1、生成静态文件</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token important">&amp;&amp;</span> npm run docs<span class="token punctuation">:</span>build

      <span class="token comment"># 2、部署到 GitHub Pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@releases/v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>	<span class="token comment"># Github 的 token</span>
          <span class="token key atrule">REPOSITORY_NAME</span><span class="token punctuation">:</span> silentims/silentims.github.io	<span class="token comment"># Github Pages 对应的仓库地址</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> master	<span class="token comment"># Github Pages 对应的仓库的分支</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> docs/.vuepress/dist	<span class="token comment">#注意这里的 docs/.vuepress/dist 表示的是 npm run docs:build 打包生成静态资源的路径，因为我们的目的是只需要将打包后的全部文件推送到 Github Pages 仓库即可，实在不清楚这个目录配置的对不对，可以先在本地执行 npm run docs:build，看看编译后的文件 dist 存在哪里，如果按照我上述的文件结构，不需要修改</span>
          
      <span class="token comment"># 3、部署到云服务器（不涉及可以注释或删除）</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rsync deployments
      	<span class="token comment"># 关于该插件详细可阅读https://github.com/Burnett01/rsync-deployments</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> burnett01/rsync<span class="token punctuation">-</span>deployments@5.0 
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 这里是 rsync 的参数 switches: -avzh --delete --exclude=&quot;&quot; --include=&quot;&quot; --filter=&quot;&quot;</span>
          <span class="token key atrule">switches</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>avzh
          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs/.vuepress/dist/	<span class="token comment"># github 源目录</span>
          <span class="token key atrule">remote_path</span><span class="token punctuation">:</span> /root/nginx/www/	<span class="token comment"># 云服务器目标目录</span>
          <span class="token key atrule">remote_host</span><span class="token punctuation">:</span> techxiang.com	<span class="token comment"># 这里可以是域名（域名已解析到云服务器）或者直接是云服务器公网ip</span>
          <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root	<span class="token comment"># 云服务器的用户</span>
          <span class="token key atrule">remote_key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ALIYUN_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>	<span class="token comment"># 云服务器私钥</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p><strong>文件中的部分参数说明</strong></p><ul><li><code>on</code> 表示触发条件</li><li><code>jobs</code> 表示要做的工作</li><li><code>step</code> 表示要做的步骤，前一步失败，后面不会继续执行。</li><li><code>name</code> 表示 action 的名称，可以自定义</li><li><code>uses</code> 表示使用哪个插件，社区有很多优秀插件，可以直接搜索和使用</li><li><code>with</code> 表示传给插件的参数，一般在插件的主页都会有参数的使用说明</li></ul><p><strong>文件中参数涉及其他操作的说明</strong></p><ul><li><code>REPOSITORY_NAME</code>：silentims/silentims.github.io</li></ul><p>配置此项时，需要先去 Github 创建一个新库，Github Pages创建会依赖此库：</p><blockquote><p>必须为 public 项目，同时勾选创建 README 文件，目的是创建后不再是一个空库，自动化脚本推送时避免空库而报错</p></blockquote><p><img src="/assets/img/20210810153125.473dd4f2.png" alt="image-20210810153121361"></p><ul><li><code>ACCESS_TOKEN</code>:</li></ul><p>此处涉及两处特殊的参数值：ACCESS_TOKEN 和 ALIYUN_RSA_PRIVATE_KEY，分别参考以下说明：</p><details class="custom-container details"><summary>为什么要使用密钥？</summary><p>为了安全，像令牌，TOKEN 、云服务器 ip 地址等这类重要信息，不能够暴露给其他人，或者你认为很重要的其他信息，不想别人看到，那么就使用 Github 提供的 secrets 功能，避免泄露</p></details><p><strong>1. secrets.ACCESS_TOKEN</strong></p><p>这个 ACCESS_TOKEN 是访问 GitHub API 的令牌，可以在 GitHub 主页，点击个人头像，Settings -&gt; Developer settings -&gt; Personal access tokens 进行生成或更新（权限选择 repo 相关的即可，如下图中橙色部分），第一次生成后你可以看到这个令牌，然后再也不会显示，因此你需要记下来，本篇假设生成的 TOKEN 令牌是 xxx</p><p>然后打开项目<code>swbook</code>的Setting -&gt; Secrets -&gt; New repository secret：</p><p><img src="/assets/img/20210810153315.b5f04f57.png" alt="image-20210810153312267"></p><p>加入环境变量， name 是 ACCESS_TOKEN，value 是 xxx。保存。</p><p><img src="/assets/img/20210810153353.a56d4d54.png" alt="image-20210810153347647"></p><p><strong>2.secrets.ALIYUN_RSA_PRIVATE_KEY</strong></p><blockquote><p>不涉及云服务器发布可以跳过不配置</p></blockquote><p>文件中这一项配置的是云服务器的私钥，一般情况下云服务器控制台都会提供一个私钥文件，如果服务器没有给你这个私钥，请自行登录云服务器生成一个可用于登录的私钥。</p><details class="custom-container details"><summary>为什么配置文件是私钥而不是公钥？</summary><p>因为 Github 自动化脚本运行时，属于创建连接的一段，会携带配置好的私钥访问云服务器，云服务器会拿到私钥解密，然后校验与<code>authorized_keys</code>中的公钥是否匹配，所以此处不要配置反了</p></details><p>以下是生成公钥、私钥的操作步骤：</p><ol><li>登录云服务器，查询或创建公钥、私钥：</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查询目录下是否有 id_rsa 和 id_rsa.pub 前者是私钥，后者是公钥</span>
<span class="token builtin class-name">cd</span> ~/.ssh
<span class="token comment"># 若没有，则执行以下命令生成，这里生成 4096 位 RSA 密钥</span>
ssh-keygen -t rsa -b <span class="token number">4096</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li><p>将<code>id_rsa.pub</code>公钥内容复制到同目录下的<code>authorized_keys</code>文件中</p></li><li><p>将<code>id_rsa</code> 私钥中的内容复制出来，然后到 GitHub 项目中添加为 Secrets（与 1 中配置 secrets.ACCESS_TOKEN 一样） 如下：</p></li></ol><p><img src="/assets/img/20210810153805.533deb5b.png" alt="image-20210810153802480"></p><h3 id="执行脚本" tabindex="-1"><a class="header-anchor" href="#执行脚本" aria-hidden="true">#</a> 执行脚本</h3><p>完成 yml 文件配置后，可以将此配置文件从本地提交并推送到 Github 中，此时进入项目所在仓库-&gt;Actions 即可查看执行情况，如果打钩则发布成功，报错的点进去查看具体错误信息，根据错误信息来不断修改配置文件参数即可</p><p><img src="/assets/img/20210810153847.f09dfcee.png" alt="image-20210810153845431"></p><h3 id="访问-github-pages" tabindex="-1"><a class="header-anchor" href="#访问-github-pages" aria-hidden="true">#</a> 访问 Github Pages</h3><p>打开刚刚自动化部署到 Github Pages 的仓库，此时仓库中已经有了刚刚推送的静态网站文件，输入 https://silentims.github.io 即可访问(其中域名为创建的仓库名)</p><div class="custom-container tip"><p class="custom-container-title">恭喜 ~ 🎉 🎉 🎉</p><p>至此，自动化部署已完成 Github Pages 的部分，如果有自己的域名，GIthub Pages 也支持修改为域名访问。</p></div><div class="custom-container warning"><p class="custom-container-title">多说几句</p><p>如果觉得 Github Pages 访问速度不理想，可以将 Github 仓库替换为国内的 Gitee，此处不做拓展，原理是基本一样的，以上也是目前大部分采用的免费搭建博客的方案，毕竟云服务器也需要花钱购买，所以单纯需要一个静态博客，完全不需要购买云服务器，毕竟云服务器除了新用户优惠力度大，后续每年续费的成本还是不小的一笔开支。</p></div><h2 id="域名访问" tabindex="-1"><a class="header-anchor" href="#域名访问" aria-hidden="true">#</a> 域名访问</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>前面已经将代码托管至 Github，同时通过 Action 脚本自动化部署发布到 Github Pages 和云服务器，Github Pages 可以直接访问到，但是推送到云服务器的静态网页文件却不能直接访问，所以本章目的就解决这个问题</p></div><details class="custom-container details"><summary>💡 输入网址后是如何访问到服务器上的静态文件的？</summary><p>比如，输入我的主站网址 techxiang.com，大致流程就是，电脑的浏览器解析你输入的网址，然后通过你使用的操作系统调用网卡，网卡会将访问的目标地址、访问者 ip、物理网关等信息，通过你所在的网络环境，比如从路由器到光猫，然后到宽带运营商，运营商再根据你输入的网址，层层向下解析，最后找到百度服务器的 ip 地址，因为 ip 地址与具体某一台服务器做了备案绑定，这样就能访问到服务器上的内容，随后再以原同样的方式将内容响应到你的电脑上，通过浏览器渲染页面，就完成了。</p></details><p>结合上面大致的流程，目前服务器上已经通过自动化部署后，有了静态资源文件，剩下只需要：</p><ul><li>注册一个域名，并将其解析到云服务器的 IP 上</li><li>云服务器安装 Nginx 来代理该域名发到服务器的访问请求并返回服务器上静态页面资源</li><li>提升用户访问安全性，还可以申请 HTTPS 证书，让网站支持 HTTPS 访问</li></ul><h3 id="域名注册" tabindex="-1"><a class="header-anchor" href="#域名注册" aria-hidden="true">#</a> 域名注册 <span class="badge danger" style="vertical-align:top;"><!--[-->待完善<!--]--></span></h3><p>可通过在阿里云的<a href="https://wanwang.aliyun.com/domain" target="_blank" rel="noopener noreferrer">域名注册<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>上查询和注册一个域名，需要实名认证，同时注册成功后，建议进行备案，不然可能容易出现无法访问的情况。</p><h3 id="域名解析" tabindex="-1"><a class="header-anchor" href="#域名解析" aria-hidden="true">#</a> 域名解析</h3><p>登录阿里云控制台，进入产品服务 -&gt; 域名，可以管理已注册生效的域名，我们需要将域名解析到云服务器的公网 ip 上</p><blockquote><p>由于注册的域名，一般都是顶级域名，比如 techxiang.com，为了大众对网站普遍的认知度，我们新增两条解析记录，除了解析到 techxiang.com之外，另一条解析到 www.techxiang.com，即都支持访问</p></blockquote><ul><li>记录类型：A</li><li>主机记录：@ 和 www</li><li>记录值：xx.xx.xx.xx (这是服务器的公网 ip)</li></ul><p>两条都新增后，如下图所示表示已经配置好，等待 10 分钟后生效</p><p><img src="/assets/img/20210810153949.482afe37.png" alt="image-20210810153945933"></p><h2 id="ssl-证书申请" tabindex="-1"><a class="header-anchor" href="#ssl-证书申请" aria-hidden="true">#</a> SSL 证书申请<span class="badge danger" style="vertical-align:top;"><!--[-->待完善<!--]--></span></h2><details class="custom-container details"><summary>SSL 证书的好处</summary><p>(1)保障用户隐私信息安全</p><p>(2)帮助用户识别钓鱼网站</p><p>(3)利于网站SEO优化</p><p>(4)提升公司品牌形象和可信度</p></details><p>HTTPS 证书根据安全性不同收费也不同，最基础的免费 SSL 证书，可以在阿里云控制台搜索”SSL 证书“申请，当然也可以去第三方有资质的平台免费申请，一般免费的有效期是三个月到一年左右。</p><h2 id="nginx安装与配置" tabindex="-1"><a class="header-anchor" href="#nginx安装与配置" aria-hidden="true">#</a> Nginx安装与配置</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>网络上有很多安装的方法，此处不用原生下载后编译的方法，而使用 Docker 安装，并用挂载磁盘的方式管理和配置，简单方便</p></div><blockquote><p>docker 的安装此处暂不做详细描述，后续可能会补充进来</p></blockquote><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker pull nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">说明</p><p>第一次创建 nginx 镜像的目的是不启用挂载，直接创建一个默认镜像，然后复制镜像中 nginx 的配置文件到云服务器对应的目录，方便在此基础上做修改，然后第二次创建 nginx 启用挂载模式，直接使用刚刚磁盘中的配置文件</p></div><p>第一次创建 nginx 镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker run -d --name nginx -p <span class="token number">80</span>:80 -d nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>创建本地挂载目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> nginx 
<span class="token builtin class-name">cd</span> nginx
<span class="token comment"># 批量创建 nginx 目录文件夹、用于存放配置文件、日志、ssl 证书、静态资源 </span>
<span class="token function">mkdir</span> -p conf/conf.d logs ssl www
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>复制镜像中<code>nginx.conf</code>和<code>default.conf</code>到本地磁盘</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看 nginx 运行时镜像的 CONTAINER ID</span>
docker <span class="token function">ps</span>
<span class="token comment"># 复制 nginx.conf，其中 224d770c77e8 为镜像的 CONTAINER ID ，其中/etc/nginx/nginx.conf为镜像的路径，/root/nginx/conf为云服务器配置文件的路径</span>
docker <span class="token function">cp</span> 224d770c77e8:/etc/nginx/nginx.conf /root/nginx/conf
<span class="token comment"># 复制 default.conf </span>
docker <span class="token function">cp</span> 224d770c77e8:/etc/nginx/conf.d/default.conf /root/nginx/conf/conf.d/default.conf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>此时文件结构目录如下：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>nginx		<span class="token comment"># nginx 配置根目录 手动创建</span>
├── conf	<span class="token comment"># 配置文件目录 手动创建</span>
│   ├── conf.d	<span class="token comment"># 手动创建</span>
│   │   └── default.conf	<span class="token comment"># 服务配置文件，由 docker 镜像复制而来</span>
│   └── nginx.conf	<span class="token comment"># 主配置文件，由 docker 镜像复制而来</span>
├── logs	<span class="token comment"># 日志目录 手动创建</span>
├── ssl		<span class="token comment"># https 证书，后面会用 手动创建</span>
└── www		<span class="token comment"># 静态网页资源，自动化部署将代码推送到此目录 手动创建</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>检查配置文件是否已经在对应的目录中，确认无误后停用现有 nginx 镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看当前运行的 docker 镜像</span>
docker <span class="token function">ps</span>
<span class="token comment"># 停用当前 nginx</span>
docker stop 224d770c77e8
<span class="token comment"># 移除当前 nginx 镜像</span>
docker <span class="token function">rm</span> 224d770c77e8
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>再次创建 nginx 镜像，本次创建的镜像才是真正要使用的，参数多了许多磁盘挂载的参数，即镜像中对应的资源目录挂载到之前创建好的磁盘目录上，方便后续修改和使用</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 直接复制下面全部命令，粘贴到命令行运行（注意每行末尾都有个斜杠，是换行连接符）</span>
docker run -d <span class="token punctuation">\</span>
--name nginx <span class="token punctuation">\</span>
-p <span class="token number">80</span>:80 <span class="token punctuation">\</span>
-p <span class="token number">443</span>:443 <span class="token punctuation">\</span>
-v /root/nginx/www:/usr/share/nginx/html <span class="token punctuation">\</span>
-v /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf <span class="token punctuation">\</span>
-v /root/nginx/conf/conf.d/default.conf:/etc/nginx/conf.d/default.conf <span class="token punctuation">\</span>
-v /root/nginx/logs:/var/log/nginx <span class="token punctuation">\</span>
-v /root/nginx/ssl:/ssl <span class="token punctuation">\</span>
-d nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><details class="custom-container details"><summary>-v 的参数说明</summary><p>说明</p><p><code>/root/nginx/www</code> 用于存放nginx 挂载的静态网站</p><p><code>/root/nginx/conf/nginx.conf</code>nginx 主配置文件</p><p><code>/root/nginx/conf/conf.d/default.conf</code>nginx 服务端配置文件</p><p><code>/root/nginx/conf/conf.d/default.conf</code>nginx 日志</p><p><code>/root/nginx/ssl</code>存放域名对应的 HTTPS 证书</p></details><p>创建成功后，可通过<code>docker ps</code>查询镜像启动的状态，启动成功的状态为<code>UP</code></p><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h3><p>进入配置文件目录，修改代理服务的配置</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vi</span> nginx/conf/conf.d default.conf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>修改<code>default.conf</code>文件，提供未开启和开启 HTTPS 访问共两种版本参考</p><ol><li>未开启 https 版本配置</li></ol><details class="custom-container details"><summary>点击查看详细配置（修改处已加深显示）</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>  <span class="token comment">#侦听80端口，即默认开启 http 访问</span>
    listen  <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80<span class="token punctuation">;</span>
    server_name  techxiang.com,www.techxiang.com<span class="token punctuation">;</span>	<span class="token comment"># 需要解析的域名，也就是前面申请和解析的域名地址</span>

    <span class="token comment"># 定义首页索引目录和名称</span>
    location / <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
        index  index.html index.htm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#error_page  404              /404.html;</span>

    <span class="token comment"># redirect server error pages to the static page /50x.html</span>
    <span class="token comment"># 重定向错误页面到 /50x.html</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    proxy_pass   http://127.0.0.1;</span>
        <span class="token comment">#}</span>

    <span class="token comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    root           html;</span>
    <span class="token comment">#    fastcgi_pass   127.0.0.1:9000;</span>
    <span class="token comment">#    fastcgi_index  index.php;</span>
    <span class="token comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>
    <span class="token comment">#    include        fastcgi_params;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># deny access to .htaccess files, if Apache&#39;s document root</span>
    <span class="token comment"># concurs with nginx&#39;s one</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ /\.ht {</span>
    <span class="token comment">#    deny  all;</span>
    <span class="token comment">#}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div></details><ol start="2"><li>开启 https 版本配置</li></ol><blockquote><p>开启 HTTPS 后，需要自行上传 HTTPS 证书<code>server.crt</code>和<code>·server.key</code>文件到 ssl 目录下</p></blockquote><details class="custom-container details"><summary>点击查看详细配置（增加带有 ssl 的参数，已加深显示）</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>  <span class="token comment">#侦听80端口，即默认开启 http 访问，如果强制所有的访问都必须是HTTPSS 话，80端口的都需要注销掉</span>
    listen  <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80<span class="token punctuation">;</span>
    listen    <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    server_name  techxiang.com,www.techxiang.com<span class="token punctuation">;</span>	<span class="token comment"># 需要解析的域名，也就是前面申请和解析的域名地址</span>

    <span class="token comment"># 增加ssl</span>
    ssl on<span class="token punctuation">;</span>        <span class="token comment"># 如果强制HTTPs访问，这行要打开</span>
    ssl_certificate /ssl/server.crt<span class="token punctuation">;</span>	<span class="token comment"># https证书存放位置</span>
    ssl_certificate_key /ssl/server.key<span class="token punctuation">;</span>	<span class="token comment"># https证书存放位置</span>

    ssl_session_cache    shared:SSL:1m<span class="token punctuation">;</span>
    ssl_session_timeout  5m<span class="token punctuation">;</span>

     <span class="token comment"># 指定密码为openssl支持的格式</span>
     ssl_protocols  SSLv2 SSLv3 TLSv1.2<span class="token punctuation">;</span>

     ssl_ciphers  HIGH:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5<span class="token punctuation">;</span>  <span class="token comment"># 密码加密方式</span>
     ssl_prefer_server_ciphers  on<span class="token punctuation">;</span>   <span class="token comment"># 依赖SSLv3和TLSv1协议的服务器密码将优先于客户端密码</span>

    <span class="token comment">#access_log  /var/log/nginx/host.access.log  main;</span>

    <span class="token comment"># 定义首页索引目录和名称</span>
    location / <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
        index  index.html index.htm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#error_page  404              /404.html;</span>

    <span class="token comment"># redirect server error pages to the static page /50x.html</span>
    <span class="token comment"># 重定向错误页面到 /50x.html</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    proxy_pass   http://127.0.0.1;</span>
        <span class="token comment">#}</span>

    <span class="token comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    root           html;</span>
    <span class="token comment">#    fastcgi_pass   127.0.0.1:9000;</span>
    <span class="token comment">#    fastcgi_index  index.php;</span>
    <span class="token comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>
    <span class="token comment">#    include        fastcgi_params;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># deny access to .htaccess files, if Apache&#39;s document root</span>
    <span class="token comment"># concurs with nginx&#39;s one</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ /\.ht {</span>
    <span class="token comment">#    deny  all;</span>
    <span class="token comment">#}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div></details><p>都配置好后，重启 nginx</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查询 nginx 镜像 id</span>
docker <span class="token function">ps</span>
<span class="token comment"># 重启 nginx ,此处 e60222e0a641 为第二次 nginx 镜像 id</span>
docker restart e60222e0a641
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">恭喜 ~ 🎉 🎉 🎉</p><p>至此，服务器开启域名访问的相关配置已经完成，通过输入注册的域名，访问一下自己的网站吧</p></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><span class="meta-item-info">2021/8/13 上午6:48:34</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/about/about-docs-back-up.html" class="nav-link" aria-label="关于 - 文档的备份与托管"><!--[--><!--]--> 关于 - 文档的备份与托管 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.c00db5e4.js" defer></script><script src="/assets/js/846.230969b3.js" defer></script><script src="/assets/js/app.1978498d.js" defer></script>
  </body>
</html>
